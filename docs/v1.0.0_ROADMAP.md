# LLMscope v1.0.0 Roadmap (Unified)

Last updated: 2025-10-31

This roadmap aligns the repository's existing Phase plan (`docs/ROADMAP_v5.md`) with the v2 refactor materials (visual roadmap, quick start checklist, refactor strategy). It keeps v0.2.x stable on `main` while building v1.0.0 on a dedicated branch.

---

## Decision

- Approach: Incremental refactor in the same repository
- Branching:
  - `main` → v0.2.x (stable, support-only)
  - `v2-refactor` → active development toward v1.0.0
- Merge to release:
  - When acceptance criteria and tests are met, merge `v2-refactor` → `main` and tag `v1.0.0`.

Why this approach:

- Preserve Git history and community continuity
- Lower risk via incremental, testable changes
- Easy rollback and clear migration path

---

## What guides this roadmap

- docs/ROADMAP_v5.md (P0 items and Phase 3 priorities)
- v2 refactor docs (visual_roadmap.txt, quick_start_checklist.md, refactor_strategy.md, v2_summary.md)
- This repo's current architecture and constraints

---

## Phase 0 (Immediate P0 fixes)

Grounded in docs/ROADMAP_v5.md “Priority Fixes” to close gaps before larger changes.

1. Enhanced telemetry in UI

- Add Ollama metrics: total_duration, eval_duration, prompt_eval, eval_count, tokens/sec
- Ensure backend→frontend wiring and null-safe rendering
- Acceptance: Metrics visible; values match backend; no console errors
- Tests: Snapshot test + one integration render

1. Copilot prompt includes cognitive load metrics

- Update backend prompt construction to include telemetry context
- Preserve three modes: Technical, Business, Remediation
- Acceptance: Copilot references cognitive load where applicable
- Tests: Prompt content unit tests; golden output sanity

1. Professional case reports

- Endpoint to generate a violation case report (Markdown; optional PDF)
- Template: Symptoms, Context, Diagnosis, Remediation, Outcome, Next Steps
- Acceptance: Downloadable report from violation modal
- Tests: 200 OK returns well-formed Markdown

1. Zoomed Chart (±15 minutes)

- Fix prop types, error handling, memoization; re-enable
- Acceptance: No crashes; correct time window; smooth UI
- Tests: Rendering test with mocked slice

---

## Phase 1 (Security, performance, stability)

1. Memory leak fix in Dashboard_ollama_revB.jsx

- Remove fetchSPC from useEffect deps; verify cleanup
- Acceptance: Memory remains steady in 30m session
- Tests: Render/unmount leak check

1. Remove hardcoded API keys/secrets

- No fallback keys; config via env or settings UI
- Acceptance: Secrets scan clean; app loads via env
- Tests: Lint/grep; settings load test

1. DB indexes + connection pooling

- Add indexes in init_db(); add pooling for concurrency
- Acceptance: Improved P95 query latency; no thrash
- Tests: Simple perf harness; pool limit tests

1. Input validation + rate limiting

- Pydantic models for inputs; slowapi for rate limits
- Acceptance: 422 for invalid; 429 for abuse
- Tests: Negative API + rate limit tests

---

## Phase 2 (Core features and integrations)

1. Nelson Rules R4–R8 (feature-flagged)

- Implement R4–R8 on server; keep R1–R3 unchanged
- Acceptance: Deterministic unit tests; flags toggleable
- Tests: Rule vectors; regression coverage

1. Integrations

- Prometheus `/metrics`; Grafana dashboard JSON
- Webhooks (generic POST); optional PagerDuty
- Acceptance: Metrics scrape OK; Grafana template renders
- Tests: Scrape shape; webhook contract test

1. Custom alert configuration

- Per-rule toggles, thresholds; model-specific overrides
- Acceptance: Settings persist; alerts follow overrides
- Tests: Schema + behavior tests

---

## Phase 3 (Frontend modernization)

- Replace polling with WebSocket (realtime updates)
- Add controls: TimeRangePicker, ExportButton, ThemeToggle, ModelSelector
- Add Error Boundaries and loading states
- Acceptance: Smooth realtime charts; resilient UI
- Tests: WS hook tests; component render tests

---

## Week-by-week (10-week plan)

Weeks 1–2 (Foundation)

- Create `v2-refactor` branch
- Testing (pytest + coverage), structured logging (structlog)
- YAML config system; Alembic migrations
- CI/CD (GitHub Actions)
- Deliverable: Infrastructure ready

Weeks 3–4 (Backend core)

- Nelson Rules R4–R8, WebSocket support
- Alert manager (routing, dedupe); root cause analyzer
- Security hardening (validation, rate limits)
- Deliverable: Full SPC engine + realtime

Weeks 5–6 (Frontend)

- WS integration; new controls; error boundaries; loading states
- Deliverable: Modern UI

Weeks 7–8 (Advanced)

- Multi-model monitoring; comparison dashboard; historical trends
- Prometheus metrics; custom alert thresholds
- Deliverable: Production features

Weeks 9–10 (Polish & Launch)

- Performance optimization; security audit
- Complete docs; migration guide; beta test
- Deliverable: v1.0.0 release

---

## Success metrics (track weekly)

- Test coverage ≥ 80%
- API P95 response < 100ms
- WebSocket latency < 50ms
- Docker image size < 500MB
- Nelson Rules: 8/8 implemented
- Docs: API + migration guide complete

---

## Branching & compatibility policy

- `main` remains on v0.2.x; hotfixes are applied to `main` and optionally merged into `v2-refactor`.
- New features land in `v2-refactor` behind flags when they could affect v0.2 behavior.
- Deprecations: announce in docs and logs; remove only at v1.0 release.

Feature flags (examples):

- `FEATURE_R4_R8=true`
- `FEATURE_WS_DASHBOARD=true`
- `FEATURE_ALERT_MANAGER=true`

---

## Contributor quick links

- Step-by-step: `docs/v1.0.0_STEP_BY_STEP_START.md`
- Product roadmap: `docs/ROADMAP_v5.md`
- Migration notes (create if missing): `docs/V1_MIGRATION_NOTES.md`

---

## Definition of done (per item)

- Code complete with tests
- Linting/formatting pass
- Docs updated (README/guide/API as applicable)
- Flags set by default to protect current users
- CI green on `v2-refactor`

---

By following this plan, we avoid rewriting what works, keep v0.2.x stable, and drive directly toward the v1.0.0 goals described in the visual roadmap and existing docs.
